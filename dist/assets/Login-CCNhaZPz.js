import{d as w,u as E,r as v,B as C,i as L,a as D,_ as k,c as l,b as n,e as f,f as u,w as y,v as h,t as g,g as p,o as d,h as _,j as S,k as F,l as I,C as V,m as j}from"./index-Bb44JawP.js";const B=w({__name:"LoginForm",setup(m,{expose:o}){o();const a=E(),e=v({}),t=v({login:"",password:""});function i(){const s={};if(!t.login.trim())s.login="Ingresa tu teléfono o email";else{const b=t.login.includes("@");b&&!L(t.login)?s.login="Email inválido":!b&&!D(t.login)&&(s.login="Teléfono inválido (9 dígitos)")}return t.password?t.password.length<6&&(s.password="Mínimo 6 caracteres"):s.password="Ingresa tu contraseña",Object.assign(e,s),Object.keys(s).length===0}async function r(s){if(s.preventDefault(),!!i())try{await a.login({...t})}catch{}}function c(s){e[s]&&(e[s]="")}const x={auth:a,fieldErrors:e,formData:t,validateForm:i,handleSubmit:r,clearFieldError:c,Button:C};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}}),T=["disabled"],N={key:0,class:"text-xs text-red-600 mt-1"},q=["disabled"],O={key:0,class:"text-xs text-red-600 mt-1"},R={key:0,class:"p-3 bg-red-50 border border-red-200 rounded-lg"},U={class:"text-red-700 text-sm"};function A(m,o,a,e,t,i){return d(),l("form",{onSubmit:e.handleSubmit,class:"space-y-4"},[n("div",null,[o[4]||(o[4]=n("label",{class:"block text-sm font-medium text-gray-700"},"Teléfono o Email",-1)),y(n("input",{type:"text",class:"w-full mt-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500","onUpdate:modelValue":o[0]||(o[0]=r=>e.formData.login=r),placeholder:"999123456 o email@ejemplo.com",disabled:e.auth.loading,onInput:o[1]||(o[1]=r=>e.clearFieldError("login"))},null,40,T),[[h,e.formData.login]]),e.fieldErrors.login?(d(),l("p",N,g(e.fieldErrors.login),1)):f("",!0)]),n("div",null,[o[5]||(o[5]=n("label",{class:"block text-sm font-medium text-gray-700"},"Contraseña",-1)),y(n("input",{type:"password",class:"w-full mt-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500","onUpdate:modelValue":o[2]||(o[2]=r=>e.formData.password=r),placeholder:"Tu contraseña",disabled:e.auth.loading,onInput:o[3]||(o[3]=r=>e.clearFieldError("password"))},null,40,q),[[h,e.formData.password]]),e.fieldErrors.password?(d(),l("p",O,g(e.fieldErrors.password),1)):f("",!0)]),e.auth.error?(d(),l("div",R,[n("p",U,g(e.auth.error),1)])):f("",!0),u(e.Button,{type:"submit",fullWidth:"",loading:e.auth.loading,disabled:e.auth.loading},{default:p(()=>o[6]||(o[6]=[_(" Iniciar Sesión ")])),_:1,__:[6]},8,["loading","disabled"])],32)}const P=k(B,[["render",A],["__file","C:/Users/Lenovo/Desktop/semestre_ninne/InnovacionEmprendimiento/chasqui-taxi-vue/src/auth/components/LoginForm.vue"]]),M=w({__name:"Login",setup(m,{expose:o}){o();const a=S(),{loading:e,error:t,isAuthenticated:i}=F();I(()=>i.value,c=>{c&&a.replace("/dashboard")},{immediate:!0});const r={router:a,loading:e,error:t,isAuthenticated:i,Card:V,LoginForm:P};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}}),W={class:"w-full max-w-md mx-auto"},z={class:"mt-6 text-center"},G={class:"text-sm text-gray-600"};function H(m,o,a,e,t,i){const r=j("RouterLink");return d(),l("div",W,[u(e.Card,{class:"p-8"},{default:p(()=>[o[2]||(o[2]=n("div",{class:"text-center mb-8"},[n("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Chasqui Taxi"),n("p",{class:"text-gray-600"},"Ingresa a tu cuenta")],-1)),u(e.LoginForm,{loading:e.loading,error:e.error},null,8,["loading","error"]),n("div",z,[n("p",G,[o[1]||(o[1]=_(" ¿No tienes cuenta? ")),u(r,{to:"/register",class:"text-sky-600 hover:text-sky-700 font-medium"},{default:p(()=>o[0]||(o[0]=[_(" Regístrate aquí ")])),_:1,__:[0]})])])]),_:1,__:[2]})])}const K=k(M,[["render",H],["__file","C:/Users/Lenovo/Desktop/semestre_ninne/InnovacionEmprendimiento/chasqui-taxi-vue/src/auth/pages/Login.vue"]]);export{K as default};
